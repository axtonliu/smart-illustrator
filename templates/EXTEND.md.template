---
# Smart Illustrator 扩展配置模板
#
# 使用方法：
# 1. 复制此文件到项目目录：.smart-illustrator/EXTEND.md
# 2. 或复制到用户目录：~/.smart-illustrator/EXTEND.md
# 3. 根据需要修改配置

# ============ Style-lock 配置 ============
style_lock:
  # 是否启用 style-lock
  enabled: true

  # 唯一标识符（便于追踪和复用）
  style_id: "my-project-style"

  # 参考图（1-3 张）
  # 路径可以是绝对路径或相对于 EXTEND.md 的相对路径
  references:
    - path: "./refs/style-ref-01.png"
      weight: 1.0                         # 权重 0.0-1.0，默认 1.0
      description: "主色调和构图参考"     # 可选：人类可读描述
    # - path: "./refs/style-ref-02.png"
    #   weight: 0.8
    #   description: "线条风格参考"

  # 风格约束（会追加到 prompt）
  constraints:
    palette: "深空紫 #2F2B42 为主，琥珀橙 #F59E0B 强调"
    line_weight: "细线勾边，2px 主线，1px 辅助线"
    background: "浅灰白 #F8F9FA 纯色背景"
    texture: "扁平几何，无渐变，无复杂纹理"
    mood: "专业、干净、科技感"

  # 禁止元素（会作为 negative prompt）
  forbidden:
    - "机器人"
    - "大脑图标"
    - "电路板"
    - "火箭"
    - "霓虹色"
    - "渐变背景"

# ============ 默认偏好 ============
preferences:
  # 默认风格文件：style-light.md / style-dark.md / style-minimal.md
  style: "light"

  # 水印文字
  watermark: "© Your Name | yoursite.com"

  # 输出语言
  language: "zh"

  # 默认输出目录
  output_dir: "./illustrations"

# ============ Provider 偏好 ============
provider:
  # 默认 provider：openrouter | gemini
  # 注意：使用参考图时会自动切换到 gemini
  default: "openrouter"

  # 默认模型
  model: "google/gemini-3-pro-image-preview"

  # 默认图像质量：default | 2k
  quality: "default"
---

# Style-lock 配置说明

## 参考图说明

参考图用于指导生成图像的视觉风格。建议：

1. **选择代表性样本**：选择 1-3 张最能代表目标风格的图像
2. **控制图像尺寸**：建议 512-1024px，过大会增加 API 延迟
3. **格式支持**：PNG、JPG、WebP

## 风格约束

`constraints` 字段中的描述会被追加到生成 prompt 中，用于强化风格一致性。

## 配置优先级

```
命令行参数 > 项目级 EXTEND.md > 用户级 EXTEND.md > styles/style-*.md 默认
```

## 使用示例

```bash
# 启用 style-lock（自动读取 EXTEND.md）
/smart-illustrator article.md --style-lock

# 临时禁用
/smart-illustrator article.md --no-style-lock

# 临时覆盖参考图
/smart-illustrator article.md --style-lock --ref ./new-ref.png
```

## 限制

- 参考图功能仅支持 Gemini API（OpenRouter 不支持多模态输入）
- 最多 3 张参考图
- 使用参考图时会自动从 OpenRouter 切换到 Gemini
